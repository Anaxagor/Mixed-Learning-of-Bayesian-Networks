import os,sys,inspect
currentdir = os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe())))
parentdir = os.path.dirname(currentdir)
sys.path.insert(0,parentdir)
import pandas as pd
from preprocess.discretization import get_nodes_type, code_categories
from bayesian.mi_gaussian import mi_gauss

    
data = pd.read_csv('../datasets/hackathon_processed.csv')
#columns = ['Period', 'Tectonic regime', 'Hydrocarbon type']
columns = ['Gross', 'Netpay','Porosity']
#columns = ['Gross', 'Netpay', 'Period']
data_test = data[columns]

node_type = get_nodes_type(data_test)
columns_for_discrete = []
for param in columns:
    if node_type[param] == 'cont':
        columns_for_discrete.append(param)
columns_for_code = []
for param in columns:
    if node_type[param] == 'disc':
        columns_for_code.append(param)        

data_coded, code_dict = code_categories(data_test, "label", columns_for_code)
print(mi_gauss(data_coded))
print(mi_gauss(data_coded.values))